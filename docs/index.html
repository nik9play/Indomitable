<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>indomitable</title><meta name="description" content="Documentation for indomitable"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">indomitable</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>indomitable</h2></div><div class="tsd-panel tsd-typography"><a id="md:indomitable" class="tsd-anchor"></a><h2><a href="#md:indomitable">Indomitable</a></h2><blockquote>
<p>A lightweight (the actual ship is heavy though), performant, and powerful sharder for Discord.JS</p>
</blockquote>
<p align="center">
    <img src="https://cdn.donmai.us/original/9b/cf/__indomitable_azur_lane_drawn_by_kincora__9bcf19b2f822ce75ea707e5047882d6a.png"> 
</p>

<blockquote>
<p>The ShipGirl Project; ⓒ Azur Lane</p>
</blockquote>
<a id="md:features" class="tsd-anchor"></a><h2><a href="#md:features">Features</a></h2><ul>
<li><p>Fast</p>
</li>
<li><p>Lightweight</p>
</li>
<li><p>Reliable</p>
</li>
<li><p>ESM &amp; CommonJS supported</p>
</li>
<li><p>Shard Concurrency Support</p>
</li>
<li><p>Easy to use promised based IPC</p>
</li>
<li><p>No dependencies</p>
</li>
<li><p>Very cute (and lazy)</p>
</li>
</ul>
<a id="md:used-in-prod-by-the-ff" class="tsd-anchor"></a><h2><a href="#md:used-in-prod-by-the-ff">Used in prod by the ff:</a></h2><blockquote>
<p>Chip (<a href="https://chipbot.gg/">https://chipbot.gg/</a>)</p>
</blockquote>
<blockquote>
<p>Kashima (<a href="https://kashima.saya.moe/">https://kashima.saya.moe/</a>)</p>
</blockquote>
<blockquote>
<p>Or add your own!</p>
</blockquote>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><ul>
<li>Stable</li>
</ul>
<blockquote>
<p><code>npm install indomitable</code></p>
</blockquote>
<ul>
<li>Dev</li>
</ul>
<blockquote>
<p><code>npm install https://github.com/Deivu/Indomitable.git#master</code></p>
</blockquote>
<a id="md:documentation" class="tsd-anchor"></a><h2><a href="#md:documentation">Documentation</a></h2><p>🔗 <a href="https://indomitable.shipgirl.moe/">https://indomitable.shipgirl.moe/</a></p>
<blockquote>
<p>Don&#39;t forget to read my &quot;Notes&quot; below!</p>
</blockquote>
<a id="md:example-usage" class="tsd-anchor"></a><h2><a href="#md:example-usage">Example Usage</a></h2><blockquote>
<p>Basic usage</p>
</blockquote>
<pre><code class="language-js"><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Indomitable</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;indomitable&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Client</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;discord.js&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">token</span><span class="hl-1"> = </span><span class="hl-4">&quot;your_token&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">manager</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">Indomitable</span><span class="hl-1">({ </span><span class="hl-5">client:</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">, </span><span class="hl-5">token</span><span class="hl-1"> }).</span><span class="hl-3">on</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">&quot;error&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">manager</span><span class="hl-1">.</span><span class="hl-3">spawn</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Basic usage with more Indomitable Options</p>
</blockquote>
<pre><code class="language-js"><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Indomitable</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;indomitable&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Client</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;discord.js&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">token</span><span class="hl-1"> = </span><span class="hl-4">&quot;your_token&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-6">// Processes to run</span><br/><span class="hl-1">  </span><span class="hl-5">clusterCount:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Websocket shards to run</span><br/><span class="hl-1">  </span><span class="hl-5">shardCount:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Discord.js options</span><br/><span class="hl-1">  </span><span class="hl-5">clientOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">intents:</span><span class="hl-1"> [</span><span class="hl-7">1</span><span class="hl-1"> &lt;&lt; </span><span class="hl-7">0</span><span class="hl-1">], </span><span class="hl-6">// Bitwise for GUILD intent only</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">// Auto restart processes that have been killed</span><br/><span class="hl-1">  </span><span class="hl-6">// This defaults to false by default unless you specify it</span><br/><span class="hl-1">  </span><span class="hl-5">autoRestart:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Discord.js client</span><br/><span class="hl-1">  </span><span class="hl-5">client:</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Your bot token</span><br/><span class="hl-1">  </span><span class="hl-5">token</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">manager</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">Indomitable</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">).</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-4">&quot;error&quot;</span><span class="hl-1">, </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><br/><span class="hl-5">manager</span><span class="hl-1">.</span><span class="hl-3">spawn</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Broadcasteval as one way to get data across shards</p>
</blockquote>
<pre><code class="language-js"><span class="hl-6">// Saya&#39;s note:</span><br/><span class="hl-6">// Not recommended as every broadcastEval uses eval() internally</span><br/><span class="hl-6">// Consider learning the ipc system of this library in future to get data across your clusters</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">shard</span><br/><span class="hl-1">  .</span><span class="hl-3">broadcastEval</span><span class="hl-1">((</span><span class="hl-5">client</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">guilds</span><span class="hl-1">.</span><span class="hl-5">cache</span><span class="hl-1">.</span><span class="hl-5">size</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Example of a very basic ipc communication (non repliable)</p>
</blockquote>
<pre><code class="language-js"><span class="hl-6">// Primary Process</span><br/><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-4">&quot;message&quot;</span><span class="hl-1">, (</span><span class="hl-5">message</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">.</span><span class="hl-5">op</span><span class="hl-1"> === </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><span class="hl-6">// ClientWorker Process (your client most likely)</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">shard</span><span class="hl-1">.</span><span class="hl-3">send</span><span class="hl-1">({ </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1"> } }).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Example of a very basic ipc communication (repliable)</p>
</blockquote>
<pre><code class="language-js"><span class="hl-6">// Primary Process</span><br/><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-4">&quot;message&quot;</span><span class="hl-1">, (</span><span class="hl-5">message</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">.</span><span class="hl-5">op</span><span class="hl-1"> === </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (!</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">repliable</span><span class="hl-1">) </span><span class="hl-8">return</span><span class="hl-1">; </span><span class="hl-6">// check if the message is repliable just incase, though it won&#39;t error even it is not</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">someValue</span><span class="hl-1"> = </span><span class="hl-3">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-3">reply</span><span class="hl-1">(</span><span class="hl-5">someValue</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><span class="hl-6">// ClientWorker Process (your client most likely)</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">shard</span><br/><span class="hl-1">  .</span><span class="hl-3">send</span><span class="hl-1">({ </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1"> }, </span><span class="hl-5">repliable:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<blockquote>
<p>You could also do it reversely (main process asking data from clusters instead of clusters asking main process)</p>
</blockquote>
<pre><code class="language-js"><span class="hl-6">// Primary Process</span><br/><span class="hl-6">// send to specific cluster</span><br/><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">send</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">, { </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;nya&quot;</span><span class="hl-1"> } }).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-6">// send to specific cluster with repliable</span><br/><span class="hl-5">indomitable</span><br/><span class="hl-1">  .</span><span class="hl-3">send</span><span class="hl-1">(</span><span class="hl-7">0</span><span class="hl-1">, { </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1"> }, </span><span class="hl-5">repliable:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-6">// broadcast to all clusters</span><br/><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">broadcast</span><span class="hl-1">({ </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;meow&quot;</span><span class="hl-1"> } }).</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><span class="hl-6">// broadcast to all clusters with repliable is possible as well</span><br/><span class="hl-5">indomitable</span><br/><span class="hl-1">  .</span><span class="hl-3">broadcast</span><span class="hl-1">({ </span><span class="hl-5">content:</span><span class="hl-1"> { </span><span class="hl-5">op:</span><span class="hl-1"> </span><span class="hl-4">&quot;meow&quot;</span><span class="hl-1"> }, </span><span class="hl-5">repliable:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-3">catch</span><span class="hl-1">(</span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><br/><span class="hl-6">// ClientWorker Process (your client most likely)</span><br/><span class="hl-5">client</span><span class="hl-1">.</span><span class="hl-5">shard</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-4">&quot;message&quot;</span><span class="hl-1">, (</span><span class="hl-5">message</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">.</span><span class="hl-5">op</span><span class="hl-1"> === </span><span class="hl-4">&quot;something&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (!</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">repliable</span><span class="hl-1">) </span><span class="hl-8">return</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">someValue</span><span class="hl-1"> = </span><span class="hl-3">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-3">reply</span><span class="hl-1">(</span><span class="hl-5">someValue</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">.</span><span class="hl-5">op</span><span class="hl-1"> === </span><span class="hl-4">&quot;nya&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">doSomething</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">content</span><span class="hl-1">.</span><span class="hl-5">op</span><span class="hl-1"> === </span><span class="hl-4">&quot;meow&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (!</span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-5">repliable</span><span class="hl-1">) </span><span class="hl-8">return</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-5">message</span><span class="hl-1">.</span><span class="hl-3">reply</span><span class="hl-1">(</span><span class="hl-4">&quot;nya&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Reconfiguring Indomitable on the go, to launch more clusters or more shard, or more on both</p>
</blockquote>
<pre><code class="language-js"><span class="hl-6">// Reconfigure to launch more shards based on Discord Recommendation without spawning more clusters</span><br/><span class="hl-5">indomitable</span><br/><span class="hl-1">  .</span><span class="hl-3">reconfigure</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-4">&quot;Done, Indomitable is reconfigured&quot;</span><span class="hl-1">));</span><br/><span class="hl-6">// Reconfigure to launch more clusters based on your value, but leave the shards based on Discord&#39;s recommendation</span><br/><span class="hl-5">indomitable</span><br/><span class="hl-1">  .</span><span class="hl-3">reconfigure</span><span class="hl-1">({ </span><span class="hl-5">clusters:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-4">&quot;Done, Indomitable is reconfigured&quot;</span><span class="hl-1">));</span><br/><span class="hl-6">// Reconfigure to launch more clusters or shards based on your values</span><br/><span class="hl-5">indomitable</span><br/><span class="hl-1">  .</span><span class="hl-3">reconfigure</span><span class="hl-1">({ </span><span class="hl-5">clusters:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1">, </span><span class="hl-5">shards:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1"> })</span><br/><span class="hl-1">  .</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-0">=&gt;</span><span class="hl-1"> </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-4">&quot;Done, Indomitable is reconfigured&quot;</span><span class="hl-1">));</span><br/><span class="hl-6">// Do not run restart() or restartAll() while this is running. It will cause your cluster / clusters to restart twice.</span><br/><span class="hl-8">if</span><span class="hl-1"> (!</span><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-5">isBusy</span><span class="hl-1">) </span><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">restartAll</span><span class="hl-1">();</span><br/><span class="hl-6">// Do not use reconfigure for just restarting all clusters sequentially, still use .restartAll() for that</span><br/><span class="hl-5">indomitable</span><span class="hl-1">.</span><span class="hl-3">restartAll</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<blockquote>
<p>Enabling concurrency handling (across all your shards) (Read Notes Below)</p>
</blockquote>
<pre><code class="language-js"><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Indomitable</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;indomitable&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> { </span><span class="hl-2">Client</span><span class="hl-1"> } = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&quot;discord.js&quot;</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">token</span><span class="hl-1"> = </span><span class="hl-4">&quot;your_token&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-6">// Processes to run</span><br/><span class="hl-1">  </span><span class="hl-5">clusterCount:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Websocket shards to run</span><br/><span class="hl-1">  </span><span class="hl-5">shardCount:</span><span class="hl-1"> </span><span class="hl-7">8</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Discord.js options</span><br/><span class="hl-1">  </span><span class="hl-5">clientOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">intents:</span><span class="hl-1"> [</span><span class="hl-7">1</span><span class="hl-1"> &lt;&lt; </span><span class="hl-7">0</span><span class="hl-1">], </span><span class="hl-6">// Bitwise for GUILD intent only</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">// Auto restart processes that have been killed</span><br/><span class="hl-1">  </span><span class="hl-6">// This defaults to false by default unless you specify it</span><br/><span class="hl-1">  </span><span class="hl-5">autoRestart:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Enable max concurrency handling</span><br/><span class="hl-1">  </span><span class="hl-5">handleConcurrency:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Your Discord.js client</span><br/><span class="hl-1">  </span><span class="hl-5">client:</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">// Your bot token</span><br/><span class="hl-1">  </span><span class="hl-5">token</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">manager</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">Indomitable</span><span class="hl-1">(</span><span class="hl-5">options</span><span class="hl-1">).</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-4">&quot;error&quot;</span><span class="hl-1">, </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">);</span><br/><br/><span class="hl-5">manager</span><span class="hl-1">.</span><span class="hl-3">spawn</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<ul>
<li><p>Indomitable&#39;s concurrency handling will work in <strong>any shard # and cluster #</strong> regardless</p>
</li>
<li><p>Pair this with <strong>waitForReady</strong> disabled, and you will get amazingly fast boot times, specially for those who have access to big bot sharding.</p>
</li>
<li><p>Reduces your identify calls by following global max_concurrency identifies resulting into better connection quality</p>
</li>
</ul>
<a id="md:notes" class="tsd-anchor"></a><h3><a href="#md:notes">Notes</a></h3><ul>
<li><p>You don&#39;t need to call <code>client.login(&#39;token&#39;);</code> yourself, Indomitable will call it for you.</p>
</li>
<li><p>Extended clients that extend from discord.js client will work, as long as you use <code>client.login(&#39;token&#39;);</code> to get your bot running</p>
</li>
<li><p>Your Discord.JS Client ShardClientUtil is replaced with Indomitable&#39;s ShardClientUtil. Refer to our docs for documentation 🔗 <a href="https://deivu.github.io/Indomitable/classes/client_ShardClientUtil.ShardClientUtil.html">https://deivu.github.io/Indomitable/classes/client_ShardClientUtil.ShardClientUtil.html</a></p>
</li>
</ul>
<a id="md:other-links" class="tsd-anchor"></a><h3><a href="#md:other-links">Other Links</a></h3><p><a href="https://discord.gg/FVqbtGu">Support</a> (#Development)</p>
<a id="md:indomitable-options" class="tsd-anchor"></a><h3><a href="#md:indomitable-options">Indomitable Options</a></h3><table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td>clusterCount</td>
<td>number or &#39;auto&#39;</td>
<td>How many clusters we should spawn</td>
<td>No</td>
<td>&#39;auto&#39;</td>
</tr>
<tr>
<td>shardCount</td>
<td>number or &#39;auto&#39;</td>
<td>How many websocket shards we should make</td>
<td>No</td>
<td>&#39;auto&#39;</td>
</tr>
<tr>
<td>clientOptions</td>
<td>Object</td>
<td>Discord.JS Client Options</td>
<td>No</td>
<td>{}</td>
</tr>
<tr>
<td>clusterSettings</td>
<td>Object</td>
<td>Options for the forked process</td>
<td>No</td>
<td>{}</td>
</tr>
<tr>
<td>ipcTimeout</td>
<td>number</td>
<td>Timeout before we fail a request</td>
<td>No</td>
<td>30000</td>
</tr>
<tr>
<td>spawnTimeout</td>
<td>number</td>
<td>Timeout before we fail a cluster spawn</td>
<td>No</td>
<td>60000 (multiplied by clusterShardCount internally)</td>
</tr>
<tr>
<td>spawnDelay</td>
<td>number</td>
<td>Time to wait before spawning a new cluster</td>
<td>No</td>
<td>5000</td>
</tr>
<tr>
<td>autoRestart</td>
<td>boolean</td>
<td>If you want to auto restart the shards that have been killed unintentionally</td>
<td>No</td>
<td>false</td>
</tr>
<tr>
<td>waitForReady</td>
<td>boolean</td>
<td>If you want to wait for cluster ready before spawning another cluster</td>
<td>No</td>
<td>true</td>
</tr>
<tr>
<td>handleConcurrency</td>
<td>boolean</td>
<td>Whether you want to handle shard concurrency properly</td>
<td>No</td>
<td>false</td>
</tr>
<tr>
<td>client</td>
<td>Client</td>
<td>Your Discord.JS non modified OR modified client</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>The token of your bot</td>
<td>Yes</td>
<td>None</td>
</tr>
</tbody></table>
<a id="md:made-with-❤-by-ichimakase-httpsgithubcomdeivu" class="tsd-anchor"></a><h3><a href="#md:made-with-❤-by-ichimakase-httpsgithubcomdeivu">Made with ❤ by <code>@ichimakase</code> (<a href="https://github.com/Deivu/">https://github.com/Deivu/</a>)</a></h3></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:indomitable"><span>Indomitable</span></a><a href="#md:features"><span>Features</span></a><a href="#md:used-in-prod-by-the-ff"><span>Used in prod by the ff:</span></a><a href="#md:installation"><span>Installation</span></a><a href="#md:documentation"><span>Documentation</span></a><a href="#md:example-usage"><span>Example <wbr/>Usage</span></a><ul><li><a href="#md:notes"><span>Notes</span></a></li><li><a href="#md:other-links"><span>Other <wbr/>Links</span></a></li><li><a href="#md:indomitable-options"><span>Indomitable <wbr/>Options</span></a></li><li><a href="#md:made-with-❤-by-ichimakase-httpsgithubcomdeivu"><span>Made with ❤ by @ichimakase (https://github.com/<wbr/>Deivu/)</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>indomitable</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>